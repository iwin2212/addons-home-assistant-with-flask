<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Switch Broadlink Manager</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./static/css/bootstrap.min.css">
        <link rel="stylesheet" href="./static/css/style.css">
        <link rel="stylesheet" href="./static/css/style_switch_broadlink.css">
        <script src="./static/js/jquery.min.js"></script>
        <script src="./static/js/popper.min.js"></script>
        <script src="./static/js/bootstrap.min.js"></script>
        <script src="./static/js/truncate.js"></script>
    </head>

    <body>
        {%include 'head_foot/header.html'%}
        <section id='main'>

            <div class="container">
                {%if hub['switches'] | length == 0%}
                <h3 id='title'><small>Danh sách công tắc ứng với </small>{{entity_id}}</h3>
                <div class="container">
                    <div class="container row submit-button">
                        <div>
                            <a class="btn btn-outline-info submit-button1" href='./switch_broadlink'>Danh sách thiết bị
                                broadlink</a><br>
                        </div>
                        <div>
                            <a class="btn btn-outline-info submit-button2" href='./add_switch_co_san?entity_id={{entity_id}}'>Thêm
                                công tắc hồng ngoại</a>
                        </div>
                        <div {% if "mini" in type_ %} style="display: none;" {% endif %}>
                            <a class="btn btn-outline-info submit-button2" href='./add_switch_rf?entity_id={{entity_id}}'>Thêm công
                                tắc RF</a>
                        </div>
                    </div>
                </div>
                <div class='container' id='no_broad'>
                    <h4>Không tìm thấy công tắc nào</h4>
                </div>
                {%else%}
                <h3 id='title'>Danh sách công tắc ứng với {{entity_id}}</h3>
                <div class="container row submit-button" style='margin-top: 2%; margin-left: 1%;'>
                    <div>
                        <a class="btn btn-outline-info submit-button1" href='./switch_broadlink'>Danh sách thiết bị
                            broadlink</a><br>
                    </div>
                    <div>
                        <a class="btn btn-outline-info submit-button2" href='./add_switch_co_san?entity_id={{entity_id}}'>Thêm
                            công tắc hồng ngoại</a>
                    </div>
                    <div {% if "mini" in type_ %} style="display: none;" {% endif %}>
                        <a class="btn btn-outline-info submit-button2" href='./add_switch_rf?entity_id={{entity_id}}'>Thêm công
                            tắc RF</a>
                    </div>
                </div>
                <div class="row">
                    <table style='margin: 1%;' class='container-fluid table table-striped table-hover col-md-12 col-12'>
                        <tr class="thead-light">
                            <th>Tên</th>
                            <th>Thông tin chi tiết</th>
                            <th>Lệnh</th>
                            <th>Hành động</th>
                        </tr>
                        {% for x in hub['switches'] %}
                        {% if x is mapping %}
                        <tr>
                            <td width='15%'>
                                <ul>
                                    <li>{{x['name']}}</li>
                                </ul>
                            </td>
                            <td width='25%'>
                                <ul>
                                    <li><strong>Địa chỉ Mac: </strong>{{hub['mac']}}</li>
                                </ul>
                            </td>
                            <td class='word-break' width='50%'>
                                <ul>
                                    <li><strong>command_on:</strong><br>
                                        <p class="addReadMore showlesscontent">{{x['command_on']}}</p>
                                    </li>
                                    <li><strong>command_off:</strong><br>
                                        <p class="addReadMore showlesscontent">{{x['command_off']}}
                                        </p>
                                    </li>
                                </ul>
                            </td>
                            <td width='10%'>
                                <form action='./delete_device_broadlink_with_mac?mac={{hub["mac"]}}&iden={{x["name"]}}' method='POST'>
                                    <input onclick="return confirm('Bạn chắc chắn muốn xóa ?');" type="submit" value="Xoá" class="btn btn-danger">
                                </form>
                            </td>
                        </tr>
                        {% else %}
                        <tr>
                            <td width='15%'>
                                <ul>
                                    <li>{{x['name']}}</li>
                                </ul>
                            </td>
                            <td width='25%'>
                                <ul>
                                    <li><strong>Địa chỉ Mac: </strong>{{hub['mac']}}</li>
                                </ul>
                            </td>
                            <td class='word-break' width='50%'>
                                <ul>
                                    <li><strong>command_on:</strong><br>
                                        <p class="addReadMore showlesscontent">{{hub['switches'][x]['command_on']}}</p>
                                    </li>
                                    <li><strong>command_off:</strong><br>
                                        <p class="addReadMore showlesscontent">{{hub['switches'][x]['command_off']}}
                                        </p>
                                    </li>
                                </ul>
                            </td>
                            <td width='10%'>
                                <form action='./delete_device_broadlink_with_mac?mac={{hub["mac"]}}&iden={{x}}' method='POST'>
                                    <input onclick="return confirm('Bạn chắc chắn muốn xóa ?');" type="submit" value="Xoá" class="btn btn-danger">
                                </form>
                            </td>
                        </tr>
                        {% endif %}

                        {%endfor%}
                    </table>
                </div>
                {% endif %}
            </div>
            {%block content%}
            {%include 'head_foot/footer.html' %}
            {%endblock%}

            </div>
        </section>
    </body>

</html>
<style>
    .word-break {
        word-break: break-all;
    }
</style>